ä»¥ä¸‹æ˜¯ä½ å¯ä»¥ä¿å­˜æˆ–å¤ä¹ çš„ **Day 8 æ–‡ä»¶è¯»å†™ç¬”è®°æ€»ç»“ç‰ˆ**ï¼š

---

# âœ… Day 8 ç¬”è®°ï¼šæ–‡ä»¶è¯»å†™ + JSON/CSV

---

## ğŸ“Œ ä¸€ã€åŸºæœ¬æ¦‚å¿µ

### 1. `open()` åŸºæœ¬è¯­æ³•ï¼š

```python
open(file, mode="r", encoding=None)
```

### 2. å¸¸ç”¨æ¨¡å¼ä¸€è§ˆè¡¨ï¼š

| æ¨¡å¼    | å«ä¹‰  | è¯´æ˜                         |
| ----- | --- | -------------------------- |
| `"r"` | è¯»   | æ–‡ä»¶å¿…é¡»å­˜åœ¨                     |
| `"w"` | å†™   | è¦†ç›–åŸæ–‡ä»¶ï¼Œæ–‡ä»¶ä¸å­˜åœ¨ä¼šåˆ›å»º             |
| `"a"` | è¿½åŠ   | ä»æœ«å°¾å†™å…¥ï¼Œä¸æ¸…ç©ºåŸå†…å®¹               |
| `"b"` | äºŒè¿›åˆ¶ | ä¸å…¶ä»–æ¨¡å¼ç»„åˆä½¿ç”¨ï¼Œå¦‚ `"rb"`         |
| `"+"` | è¯»+å†™ | ä¸ r/w/a ç»„åˆï¼Œå¦‚ `"r+"`ã€`"w+"` |

* âš ï¸ äºŒè¿›åˆ¶æ¨¡å¼ä¸æ¥å— `encoding`
* âš ï¸ æ–‡æœ¬æ¨¡å¼å¤„ç†å­—ç¬¦ä¸²ï¼ŒäºŒè¿›åˆ¶æ¨¡å¼å¤„ç†å­—èŠ‚ï¼ˆ`bytes`ï¼‰

---

## ğŸ“Œ äºŒã€æ–‡ä»¶è¯»å†™æ–¹å¼

### æ‰“å¼€æ–‡ä»¶æ¨èç”¨æ³•ï¼ˆè‡ªåŠ¨å…³é—­ï¼‰ï¼š

```python
with open("file.txt", "r", encoding="utf-8") as f:
    content = f.read()
```

### å¸¸è§è¯»å–æ–¹å¼ï¼š

```python
f.read()        # å…¨éƒ¨è¯»ï¼ˆé€‚åˆå°æ–‡ä»¶ï¼‰
f.readline()    # è¯»ä¸€è¡Œ
f.readlines()   # è¯»æ‰€æœ‰è¡Œï¼Œè¿”å›åˆ—è¡¨
for line in f:  # æ›´æ¨èï¼Œé€è¡Œè¿­ä»£
```

### å†™å…¥æ–‡ä»¶ï¼š

```python
f.write("text\n")  # æ‰‹åŠ¨æ·»åŠ æ¢è¡Œç¬¦
```

---

## ğŸ“Œ ä¸‰ã€æ–‡æœ¬ç¼–ç ï¼ˆé¿å…ä¹±ç ï¼‰

* å»ºè®®å§‹ç»ˆæ˜¾å¼æŒ‡å®šï¼š`encoding="utf-8"`
* é˜²æ­¢åœ¨ Windows ä¸­æ–‡ç³»ç»Ÿä¸­ä½¿ç”¨é»˜è®¤ `gbk` ç¼–ç å‡ºé”™
* å‡ºç° `UnicodeDecodeError`ï¼Œä¼˜å…ˆè€ƒè™‘ç¼–ç é—®é¢˜

---

## ğŸ“Œ å››ã€JSON æ–‡ä»¶æ“ä½œ

```python
import json

# å†™å…¥ JSON æ–‡ä»¶
with open("data.json", "w", encoding="utf-8") as f:
    json.dump(obj, f, ensure_ascii=False, indent=2)

# è¯»å– JSON æ–‡ä»¶
with open("data.json", "r", encoding="utf-8") as f:
    data = json.load(f)
```

* `ensure_ascii=False`ï¼šæ”¯æŒä¸­æ–‡è¾“å‡º
* `indent=2`ï¼šæ ¼å¼åŒ–è¾“å‡ºï¼Œä¾¿äºé˜…è¯»

---

## ğŸ“Œ äº”ã€CSV æ–‡ä»¶æ“ä½œ

```python
import csv

# å†™ CSV
with open("out.csv", "w", newline="", encoding="utf-8") as f:
    writer = csv.writer(f)
    writer.writerow(["name", "score"])
    writer.writerows([["Alice", 90], ["Bob", 80]])

# è¯» CSV
with open("out.csv", "r", newline="", encoding="utf-8") as f:
    reader = csv.reader(f)
    for row in reader:
        print(row)
```

* âœ… å¿…é¡»åŠ  `newline=""`ï¼Œå¦åˆ™ Windows ä¸‹å†™å…¥ä¼šå¤šç©ºè¡Œ
* ä½¿ç”¨ `csv.DictReader` / `DictWriter` å¯è¯»å†™å­—å…¸æ ¼å¼

---

## ğŸ“Œ å…­ã€ç»ƒä¹ é¡¹ç›®å›é¡¾ï¼ˆæ€»ç»“ï¼‰

### âœ… ç»ƒä¹  1ï¼šè¯é¢‘ç»Ÿè®¡

* è¯»å…¥ `input.txt`
* ç”¨ `re.sub` æ¸…æ´—æ ‡ç‚¹ â†’ `str.split()` æ‹†è¯
* ç”¨ `dict` æˆ– `collections.Counter` ç»Ÿè®¡
* è¾“å‡ºåˆ°ï¼š

  * `freq.txt`ï¼šé€è¡Œå†™å…¥ `word count`
  * `freq.csv`ï¼šå†™å…¥ä¸¤åˆ—è¡¨æ ¼ `word,count`

---

### âœ… ç»ƒä¹  2ï¼šJSON è¯»å†™

* åˆ›å»ºé…ç½®å­—å…¸
* `json.dump` å†™å…¥æ–‡ä»¶
* è¯»å– â†’ ä¿®æ”¹å­—æ®µ â†’ å†å†™å›

---

## ğŸ“Œ ä¸ƒã€æ˜“é”™ç‚¹ï¼ˆå›é¿ï¼‰

* âŒ å¿˜äº†åŠ  `with` æˆ– `f.close()`ï¼šæ–‡ä»¶æœªåŠæ—¶å…³é—­
* âŒ å†™å…¥ CSV å¿˜è®° `newline=""` â†’ å¤šå‡ºç©ºè¡Œ
* âŒ å†™å…¥æ–‡æœ¬ä¸åŠ  `\n` â†’ å…¨éƒ¨ä¸€è¡Œç²˜ä¸€èµ·
* âŒ æ–‡æœ¬æ–‡ä»¶ä¸­æ–‡ä¹±ç  â†’ è¦å†™ `encoding="utf-8"`

---

## ğŸ“Œ å…«ã€æ¨èè¡¥å……èµ„æ–™

* å»–é›ªå³°æ•™ç¨‹ â€“ [IO ç¼–ç¨‹](https://www.liaoxuefeng.com/wiki/1016959663602400/1017075323636768)
* èœé¸Ÿæ•™ç¨‹ â€“ Python æ–‡ä»¶ã€JSONã€CSV
* å®˜æ–¹æ–‡æ¡£ï¼š

  * [`open()` ç”¨æ³•](https://docs.python.org/3/library/functions.html#open)
  * [`json` æ¨¡å—](https://docs.python.org/3/library/json.html)
  * [`csv` æ¨¡å—](https://docs.python.org/3/library/csv.html)

